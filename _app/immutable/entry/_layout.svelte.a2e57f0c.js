import{S as v,i as y,s as g,C as k,k as _,a as S,D as $,l as h,h as d,c as A,m as C,n as m,E as W,b as w,F as E,G as N,H as B,g as D,d as I,o as L}from"../chunks/index.9265c3c6.js";import{S as M,s as b,a as T}from"../chunks/utils.1d0da8e0.js";function q(c){let a,u,i,l;const n=c[1].default,t=k(n,c,c[0],null);return{c(){a=_("link"),u=S(),i=_("main"),t&&t.c(),this.h()},l(e){const o=$("svelte-n34gtx",document.head);a=h(o,"LINK",{rel:!0,href:!0}),o.forEach(d),u=A(e),i=h(e,"MAIN",{});var r=C(i);t&&t.l(r),r.forEach(d),this.h()},h(){m(a,"rel","apple-touch-icon"),m(a,"href","./pwa-192x192.png")},m(e,o){W(document.head,a),w(e,u,o),w(e,i,o),t&&t.m(i,null),l=!0},p(e,[o]){t&&t.p&&(!l||o&1)&&E(t,n,e,e[0],l?B(n,e[0],o,null):N(e[0]),null)},i(e){l||(D(t,e),l=!0)},o(e){I(t,e),l=!1},d(e){d(a),e&&d(u),e&&d(i),t&&t.d(e)}}}function F(c,a,u){let{$$slots:i={},$$scope:l}=a,n={},t,e="localhost";function o(){console.log(window.location),n.read(),e=n.data.host||window.location.host;let r="ws://"+e+"/ws";return window.location.protocol.includes("https")&&(r="wss://"+e+"/ws"),console.log("Trying to open a WebSocket connection...",r),t=new WebSocket(r),t.onopen=f=>{console.log("Connection opened")},t.onclose=f=>{console.log("Connection closed"),setTimeout(o,2e3)},t.onmessage=f=>{let s={status:void 0,value:void 0};try{if(s=JSON.parse(f.data),s&&s.status)switch(s.status){case"i":s.value&&Array.isArray(s.value)&&b.update(p=>s.value);break;case"o":s.value&&s.value.o&&Array.isArray(s.value.o)&&T.update(p=>s.value);break}}catch(p){console.error(p)}},t}return L(async()=>{n=new M("data_user"),e=n.data.host||window.location.host,n.data.host=e,n.write(),b.set([]),"WebSocket"in window?o():console.error("WebSocket is not supported by your Browser.")}),c.$$set=r=>{"$$scope"in r&&u(0,l=r.$$scope)},[l,i]}class J extends v{constructor(a){super(),y(this,a,F,q,g,{})}}export{J as default};
