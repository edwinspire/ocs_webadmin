var h=Object.defineProperty;var p=(t,e,r)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var i=(t,e,r)=>(p(t,typeof e!="symbol"?e+"":e,r),r);import{w as f}from"./index.8d825a6c.js";const b=f([]),S=f([]);function c(t){this.message=t}c.prototype=new Error,c.prototype.name="InvalidCharacterError";var l=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new c("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,a,s=0,n=0,d="";a=e.charAt(n++);~a&&(r=s%4?64*r+a:a,s++%4)?d+=String.fromCharCode(255&r>>(-2*s&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return d};function g(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(l(r).replace(/(.)/g,function(a,s){var n=s.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(e)}catch{return l(e)}}function o(t){this.message=t}function w(t,e){if(typeof t!="string")throw new o("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(g(t.split(".")[r]))}catch(a){throw new o("Invalid token specified: "+a.message)}}o.prototype=new Error,o.prototype.name="InvalidTokenError";function I(t){console.log("GetDeviceID > ",t);let e="";if(t&&t.length>0&&t!="00a0aa00-aa00-0000-0000-000000000000")try{let r=w(t);console.log(r),r&&r.deviceId&&(e=r.deviceId)}catch(r){e=r.message}else e="Not assigned";return console.log("GetDeviceID return",e),e}function k(t,e,r){console.log(e),t("event",{name:e,value:r})}async function D(){let t="",e=u("/device/cert");try{let r=await fetch(e.endpoint,{headers:e.headers}),a=await r.json();console.log(a),r.status==200&&a&&a.cfp&&(t=a.cfp)}catch(r){console.trace(r)}return t}async function C(t){let e=u("/device/cert");if(t)try{let r=await fetch(e.endpoint,{method:"POST",headers:e.headers,body:JSON.stringify({cfp:t})}),a=await r.json();return console.log(a),!!(r.status==200&&a)}catch(r){return console.log(r),!1}else return!1}class y{constructor(e){i(this,"data",{});i(this,"_name_storage","ss");this._name_storage=e||this._name_storage,this.read()}write(){typeof window<"u"?sessionStorage.setItem(this._name_storage,JSON.stringify(this.data)):console.error("window is not defined")}read(){try{this.data=JSON.parse(sessionStorage.getItem(this._name_storage))||{}}catch(e){this.data={},console.error(e)}}clear(){this.data={},this.write()}}function m(t,e,r){let a="";return t&&t.length>0?t=t:t="http",typeof window<"u"?e=e||window.location.host:e=e||"localhost",a=`${t}://${e}${r}`,a}function u(t){let e={};const r=new y("data_user");return e.headers={"Content-Type":"application/json",token:r.data.token},e.endpoint=m("http",r.data.host,t),e}export{I as G,y as S,S as a,D as b,u as c,k as d,C as e,b as s};
